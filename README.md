# notion_convert_relation
Notionで既に作成済みのリレーションではない属性を指定し、該当属性をキーとする別のDBを作成しリレーションに変換する。

# 実行環境
* Python 3.9 以上


# 操作手順
1. Notion APIで、インテグレーションを作成する
1. 作成したインテグレーションのシークレットトークンをコピーし、 `settings.cfg` の`NOTION_API_TOKEN=xxxx`の`xxxx`の部分にコピーする
1. Notion上で、リレーションを変更したいデータベースを含むページに、上で作成したインテグレーションをコネクトとして紐づける
1. DBとして切り出しリレーションに変更したい属性を持つデータベースのIDをコピーし、`settings.cfg` の`ORIGIN_DB_ID=xxxx`の`xxxx`の部分にコピーする
1. 切り出したデータベースを配置する親ページのIDをコピーし、`settings.cfg` の`PARENT_PAGE_ID=xxxx`の`xxxx`の部分にコピーする
1. `pip install -r requirements.txt` を実行する
1. `tools/converter.py` を実行する

# 動作条件
* スクリプトの実行中は、Notion側での操作を実施しないでください。整合が取れなくなる場合があります。
* 現時点では、DBに切り出せるプロパティはテキスト型のものに限られます。
    * マルチセレクト型のプロパティへの対応も検討中です。
* 十分な動作確認をできていないため、作業対象のページやデータベースのバックアップを取得した上で、スクリプトを実行してください。
    * 本スクリプトの実行によりデータが破損しても、責任を負いかねます。